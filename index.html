<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Painel Admin</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
<style>
body{background:#0d0d0d;color:#fff;font-family:Arial}
.container{max-width:900px;margin:auto;background:#1c1c1c;padding:20px;border-radius:10px}
input{padding:6px;border-radius:4px;border:none}
button{padding:6px 10px;border:none;border-radius:5px;cursor:pointer}
.remove{background:#ff3d3d;color:#fff}
.edit{background:#2196F3;color:#fff}
</style>
</head>
<body>

<div class="container">
<h2>üõ† Painel Admin</h2>
<input placeholder="Buscar" oninput="buscar(this.value)">
<button onclick="removerTodos()" class="remove">Excluir TODOS</button>
<ul id="lista"></ul>
</div>

<script>
const API = 'https://script.google.com/macros/s/AKfycbySfyYAu9ec3tjRIWtPryOihTkq3poctMgHfzKlnPJQuDceCaHF4c3i6YZOMDfZDVuN/exec';
let dados=[];

function carregar(){
fetch(API+'?action=infoBolao').then(r=>r.json()).then(d=>{
dados=d.participantes;
render(dados);
});
}
setInterval(carregar,10000);
carregar();

function render(lista){
const ul=document.getElementById('lista');
ul.innerHTML='';
lista.forEach(p=>{
ul.innerHTML+=`
<li>
<input value="${p.nome}" onchange="editar('${p.id}','nome',this.value)">
<input value="${p.telefone}" onchange="editar('${p.id}','telefone',this.value)">
${p.status}
<button class="remove" onclick="remover('${p.id}')">‚ùå</button>
</li>`;
});
}

function editar(id,campo,valor){
fetch(API,{method:'POST',headers:{'Content-Type':'application/json'},
body:JSON.stringify({action:'editarCampo',id,campo,valor})});
}

function remover(id){
if(confirm('Remover?'))
fetch(API,{method:'POST',headers:{'Content-Type':'application/json'},
body:JSON.stringify({action:'removerParticipante',id})})
.then(()=>carregar());
}

function removerTodos(){
if(confirm('Excluir TODOS?'))
fetch(API,{method:'POST',headers:{'Content-Type':'application/json'},
body:JSON.stringify({action:'removerTodos'})})
.then(()=>carregar());
}

function buscar(t){
render(dados.filter(p=>p.nome.toLowerCase().includes(t.toLowerCase())
||p.telefone.includes(t)));
}
</script>
</body>
</html>
